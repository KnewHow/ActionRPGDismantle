# Character 中的 Possessed 和 UnPossessed

昨天分析代码中，发现这两个函数，一直不知道他们是如何运行的，今天我们来实际测试一下：

![image-20200713221128240](./images/image-20200713221128240.png)

其实这两个函数来自与`Pawn`：

![image-20200713221233697](./images/image-20200713221233697.png)

![image-20200713221251450](./images/image-20200713221251450.png)

根据注释的解释，这两个函数应该是当玩家控制/不控制当前角色的时候调用。我们可以使用蓝图演示一下，他们在蓝图中对应的节点：

![image-20200713223216668](./images/image-20200713223216668.png)

![image-20200713223236510](./images/image-20200713223236510.png)

## 1 蓝图效果演示

建立一个第三人称模板，将第三人称角色复制一份，改个名字，加一个不同的材质：

![image-20200713222431076](./images/image-20200713222431076.png)



### 1.1 再第三人称角色中按E切换到复制角色

![image-20200713222650503](./images/image-20200713222650503.png)



### 1.2 在复制的角色中按 E 切换到第三人称角色

![image-20200713222736825](./images/image-20200713222736825.png)



### 1.3 验证调试结果

切换到复制角色时调用了`UnPossessed`

![image-20200713222830683](./images/image-20200713222830683.png)

切换到第三人称角色时调用`Possessed`

![image-20200713222858649](./images/image-20200713222858649.png)

结论：和注释说明的一样，在控制角色调用`Possessed`,在离开控制时调用`UnPossessed`。

## 2 源码追踪

![image-20200713221910655](./images/image-20200713221910655.png)

我们追一下他的实现：

![image-20200713222017334](./images/image-20200713222017334.png)

发现她手动的调用了`pawn`中的`ProcessBy`方法，而`UnPossess`也是一样的

![image-20200713222206352](./images/image-20200713222206352.png)